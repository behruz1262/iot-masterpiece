<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart IoT Traffic Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #0f0f0f;
      color: #f1f1f1;
      font-family: sans-serif;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    canvas {
      margin: 20px auto;
      display: block;
      background-color: #1c1c1c;
      border-radius: 12px;
    }
    pre {
      background: #1a1a1a;
      padding: 10px;
      border-radius: 10px;
      color: #0f0;
      max-width: 800px;
      margin: auto;
    }
  </style>
</head>
<body>
  <h1>ðŸš€ IoT Behavior Profiler</h1>

  <h2>ðŸ“Š Devices by Packet Count</h2>
  <canvas id="deviceChart" width="800" height="400"></canvas>

  <h2>ðŸ§ª Protocol Breakdown</h2>
  <canvas id="protocolChart" width="800" height="400"></canvas>

  <h2>ðŸ§  AI-style Behavior Notes</h2>
  <pre id="notes">Loading behavior notes...</pre>

  <script>
    async function loadData(url) {
      const res = await fetch(url);
      return await res.json();
    }

    async function loadText(url) {
      const res = await fetch(url);
      return await res.text();
    }

    async function renderCharts() {
      const devices = await loadData('device_summary.json');
      const protocols = await loadData('protocol_breakdown.json');
      const notes = await loadText('behavior_notes.txt');
      document.getElementById('notes').innerText = notes;

      const deviceCtx = document.getElementById('deviceChart').getContext('2d');
      new Chart(deviceCtx, {
        type: 'bar',
        data: {
          labels: Object.keys(devices),
          datasets: [{
            label: 'Packets',
            data: Object.values(devices),
            backgroundColor: 'rgba(0, 255, 0, 0.6)',
            borderColor: 'rgba(0, 255, 0, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              ticks: { color: '#f1f1f1' }
            },
            x: {
              ticks: { color: '#f1f1f1' }
            }
          },
          plugins: {
            legend: {
              labels: { color: '#f1f1f1' }
            }
          }
        }
      });

      const protoCtx = document.getElementById('protocolChart').getContext('2d');
      new Chart(protoCtx, {
        type: 'pie',
        data: {
          labels: Object.keys(protocols),
          datasets: [{
            label: 'Protocol Usage',
            data: Object.values(protocols),
            backgroundColor: ['#00ff99', '#33ccff', '#ffcc00', '#ff3366', '#9966ff']
          }]
        },
        options: {
          plugins: {
            legend: {
              labels: { color: '#f1f1f1' }
            }
          }
        }
      });
    }

    renderCharts();
  </script>
</body>
</html>

